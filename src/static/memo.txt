220220

モジュール化した test_split_novel の関数群を getPagesJs.js に配置、
Pages コンポーネントから読み込ませてみたが、
戻り値が Promise となっていて受け取れなかった。

しかたないので Pages コンポーネントに移植してみたが、
今度は clientHeight 効かない問題が発覚。
テストページで useRef() を使ったところ、解決。

useRef() で要素のスケールは取得できたが、
実際にスケールテストで行を追加した後に hogeRef.current.client に
アクセスするとエラーになる。

値が変化しても再読み込みが行われない？　という仕様らしいので、
変化後のサイズを検出するのは不可能かもしれない。

Scale.js で悪戦苦闘中。
Page インスタンス、最初で改ページが行われずに
すべての行が最初の Page.lines に格納されてしまっている。

たぶんスケール周りの計測が正確にできていないと思われる。